{"version":3,"file":"Chatbot-BGJ7dCqW.js","sources":["../../src/components/Chatbot/Chatbot.jsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { FiMessageCircle, FiX, FiSend, FiUser } from 'react-icons/fi';\r\nimport { BsRobot } from 'react-icons/bs';\r\nimport './Chatbot.css';\r\n\r\n// Default FAQ Data (fallback if API fails)\r\nconst defaultFaqData = [\r\n  {\r\n    keywords: ['hello', 'hi', 'hey', 'good morning', 'good evening'],\r\n    response: \"Hello! üëã Welcome to Robozonix Labs! I'm your virtual assistant. How can I help you today?\",\r\n  },\r\n  {\r\n    keywords: ['membership', 'plans', 'pricing', 'cost', 'price', 'fee'],\r\n    response: \"We offer 4 membership plans:\\n\\nüÜì **Free** - Basic access\\nüíé **Basic** - ‚Çπ999/month\\n‚≠ê **Standard** - ‚Çπ1,999/month\\nüëë **Premium** - ‚Çπ4,999/month\\n\\nVisit our Membership page for full details!\",\r\n  },\r\n  {\r\n    keywords: ['contact', 'email', 'phone'],\r\n    response: \"You can reach us at:\\n\\nüìß info@robozonix.com\\nüìû +91 98765 43210\\n\\nOr visit our Contact page!\",\r\n  },\r\n];\r\n\r\nconst defaultQuickReplies = [\r\n  'Membership Plans',\r\n  'Lab Timings',\r\n  'Available Courses',\r\n  'Contact Info',\r\n];\r\n\r\nconst Chatbot = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      type: 'bot',\r\n      text: \"Hi! üëã I'm RoboBot, your Robozonix assistant. How can I help you today?\",\r\n    },\r\n  ]);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  \r\n  // Dynamic data from API\r\n  const [faqData, setFaqData] = useState(defaultFaqData);\r\n  const [quickReplies, setQuickReplies] = useState(defaultQuickReplies);\r\n\r\n  // Fetch chatbot responses from API\r\n  useEffect(() => {\r\n    const fetchResponses = async () => {\r\n      try {\r\n        const res = await fetch('/api/content/chatbot');\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          if (data && data.length > 0) {\r\n            setFaqData(data);\r\n            // Extract quick replies\r\n            const qr = data\r\n              .filter(item => item.isQuickReply && item.quickReplyLabel)\r\n              .map(item => item.quickReplyLabel);\r\n            if (qr.length > 0) setQuickReplies(qr);\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.log('Using default chatbot responses');\r\n      }\r\n    };\r\n    fetchResponses();\r\n  }, []);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const findResponse = (input) => {\r\n    const lowerInput = input.toLowerCase();\r\n    \r\n    for (const faq of faqData) {\r\n      if (faq.keywords.some(keyword => lowerInput.includes(keyword))) {\r\n        return faq.response;\r\n      }\r\n    }\r\n    \r\n    return \"I'm not sure about that. You can:\\n\\n‚Ä¢ Ask about memberships, courses, or facilities\\n‚Ä¢ Contact us at info@robozonix.com\\n‚Ä¢ Visit our Contact page for more help\\n\\nWhat else would you like to know?\";\r\n  };\r\n\r\n  const handleSend = (text = inputValue) => {\r\n    if (!text.trim()) return;\r\n\r\n    // Add user message\r\n    setMessages(prev => [...prev, { type: 'user', text }]);\r\n    setInputValue('');\r\n    setIsTyping(true);\r\n\r\n    // Simulate typing delay\r\n    setTimeout(() => {\r\n      const response = findResponse(text);\r\n      setMessages(prev => [...prev, { type: 'bot', text: response }]);\r\n      setIsTyping(false);\r\n    }, 800 + Math.random() * 500);\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Chat Toggle Button */}\r\n      <motion.button\r\n        className={`chatbot-toggle ${isOpen ? 'open' : ''}`}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        whileHover={{ scale: 1.1 }}\r\n        whileTap={{ scale: 0.9 }}\r\n        aria-label=\"Toggle chat\"\r\n      >\r\n        <AnimatePresence mode=\"wait\">\r\n          {isOpen ? (\r\n            <motion.div\r\n              key=\"close\"\r\n              initial={{ rotate: -90, opacity: 0 }}\r\n              animate={{ rotate: 0, opacity: 1 }}\r\n              exit={{ rotate: 90, opacity: 0 }}\r\n            >\r\n              <FiX size={24} />\r\n            </motion.div>\r\n          ) : (\r\n            <motion.div\r\n              key=\"open\"\r\n              initial={{ rotate: 90, opacity: 0 }}\r\n              animate={{ rotate: 0, opacity: 1 }}\r\n              exit={{ rotate: -90, opacity: 0 }}\r\n            >\r\n              <BsRobot size={26} />\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n        {!isOpen && (\r\n          <span className=\"chat-badge\">1</span>\r\n        )}\r\n      </motion.button>\r\n\r\n      {/* Chat Window */}\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            className=\"chatbot-window\"\r\n            initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: 20, scale: 0.95 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n          >\r\n            {/* Header */}\r\n            <div className=\"chatbot-header\">\r\n              <div className=\"chatbot-header-info\">\r\n                <div className=\"chatbot-avatar\">\r\n                  <BsRobot size={20} />\r\n                </div>\r\n                <div>\r\n                  <h4>RoboBot</h4>\r\n                  <span className=\"status\">‚óè Online</span>\r\n                </div>\r\n              </div>\r\n              <button className=\"close-btn\" onClick={() => setIsOpen(false)}>\r\n                <FiX />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Messages */}\r\n            <div className=\"chatbot-messages\">\r\n              {messages.map((msg, index) => (\r\n                <motion.div\r\n                  key={index}\r\n                  className={`message ${msg.type}`}\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: index * 0.05 }}\r\n                >\r\n                  {msg.type === 'bot' && (\r\n                    <div className=\"message-avatar\">\r\n                      <BsRobot />\r\n                    </div>\r\n                  )}\r\n                  <div className=\"message-content\">\r\n                    {msg.text.split('\\n').map((line, i) => (\r\n                      <p key={i}>{line}</p>\r\n                    ))}\r\n                  </div>\r\n                  {msg.type === 'user' && (\r\n                    <div className=\"message-avatar user-avatar\">\r\n                      <FiUser />\r\n                    </div>\r\n                  )}\r\n                </motion.div>\r\n              ))}\r\n              \r\n              {isTyping && (\r\n                <div className=\"message bot\">\r\n                  <div className=\"message-avatar\">\r\n                    <BsRobot />\r\n                  </div>\r\n                  <div className=\"typing-indicator\">\r\n                    <span></span>\r\n                    <span></span>\r\n                    <span></span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Quick Replies */}\r\n            <div className=\"quick-replies\">\r\n              {quickReplies.map((reply, index) => (\r\n                <button\r\n                  key={index}\r\n                  className=\"quick-reply-btn\"\r\n                  onClick={() => handleSend(reply)}\r\n                >\r\n                  {reply}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Input */}\r\n            <div className=\"chatbot-input\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Type a message...\"\r\n                value={inputValue}\r\n                onChange={(e) => setInputValue(e.target.value)}\r\n                onKeyPress={handleKeyPress}\r\n              />\r\n              <button \r\n                className=\"send-btn\" \r\n                onClick={() => handleSend()}\r\n                disabled={!inputValue.trim()}\r\n              >\r\n                <FiSend />\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chatbot;\r\n"],"names":["defaultFaqData","keywords","response","defaultQuickReplies","Chatbot","isOpen","setIsOpen","useState","messages","setMessages","type","text","inputValue","setInputValue","isTyping","setIsTyping","messagesEndRef","useRef","faqData","setFaqData","quickReplies","setQuickReplies","useEffect","async","res","fetch","ok","data","json","length","qr","filter","item","isQuickReply","quickReplyLabel","map","err","fetchResponses","current","scrollIntoView","behavior","handleSend","trim","prev","setTimeout","input","lowerInput","toLowerCase","faq","some","keyword","includes","findResponse","Math","random","jsxs","Fragment","children","motion","button","className","onClick","whileHover","scale","whileTap","jsx","AnimatePresence","mode","div","initial","rotate","opacity","animate","exit","FiX","size","BsRobot","y","transition","damping","stiffness","msg","index","delay","split","line","i","FiUser","ref","reply","placeholder","value","onChange","e","target","onKeyPress","key","disabled","FiSend"],"mappings":"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"}