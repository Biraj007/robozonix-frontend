import{j as e}from"./ui-B79sv0Rh.js";import{h as a,r as t}from"./vendor-BefrSIwx.js";import{n as i,_ as s,x as r,a as l,$ as n,a0 as c,G as o,a1 as d}from"./index-DpUjF_p5.js";import"./drei-Bucn9VWY.js";import"./three-DVpoEhjm.js";const h=()=>{const[h]=a(),[u,p]=t.useState([]),[m,x]=t.useState(!0),[j,v]=t.useState(!1),[y,g]=t.useState(null),[b,f]=t.useState(""),[N,C]=t.useState({name:"",description:"",shortDescription:"",category:"Lab",coverImage:"",features:"",capacity:0,availability:"Available",bookingRequired:!1,hourlyRate:0,status:"active",featured:!1});t.useEffect(()=>{w(),"new"===h.get("action")&&v(!0)},[h]);const w=async()=>{try{const e=await i.get("/admin/facilities");p(e.data)}catch(e){}finally{x(!1)}},k=()=>{v(!1),g(null),C({name:"",description:"",shortDescription:"",category:"Lab",coverImage:"",features:"",capacity:0,availability:"Available",bookingRequired:!1,hourlyRate:0,status:"active",featured:!1})},S=u.filter(e=>e.name.toLowerCase().includes(b.toLowerCase()));return e.jsxs("div",{children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{className:"admin-title",children:"Facility Management"}),e.jsx("div",{className:"admin-actions",children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>v(!0),children:[e.jsx(s,{})," Add Facility"]})})]}),e.jsxs("div",{style:{marginBottom:24,position:"relative",maxWidth:400},children:[e.jsx(r,{style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search facilities...",value:b,onChange:e=>f(e.target.value),style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-secondary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-md)",color:"var(--text-primary)"}})]}),m?e.jsx("div",{className:"empty-state",children:"Loading..."}):0===S.length?e.jsxs("div",{className:"empty-state",children:[e.jsx(l,{}),e.jsx("p",{children:"No facilities found"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>v(!0),style:{marginTop:16},children:"Add First Facility"})]}):e.jsx("div",{className:"content-table-wrapper",children:e.jsxs("table",{className:"content-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Capacity"}),e.jsx("th",{children:"Availability"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:S.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:a.category}),e.jsx("td",{children:a.capacity||"-"}),e.jsx("td",{children:a.availability}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${a.status}`,children:a.status})}),e.jsx("td",{children:e.jsxs("div",{className:"table-actions",children:[e.jsx("button",{className:"action-btn",onClick:()=>(e=>{g(e),C({name:e.name,description:e.description,shortDescription:e.shortDescription||"",category:e.category,coverImage:e.coverImage||"",features:e.features?.join(", ")||"",capacity:e.capacity||0,availability:e.availability||"Available",bookingRequired:e.bookingRequired,hourlyRate:e.hourlyRate||0,status:e.status,featured:e.featured}),v(!0)})(a),children:e.jsx(n,{})}),e.jsx("button",{className:"action-btn delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this facility?"))try{await i.delete(`/admin/facilities/${e}`),w()}catch(a){}})(a._id),children:e.jsx(c,{})})]})})]},a._id))})]})}),j&&e.jsx("div",{className:"modal-overlay",onClick:k,children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title",children:y?"Edit Facility":"New Facility"}),e.jsx("button",{className:"modal-close",onClick:k,children:e.jsx(o,{})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...N,features:N.features.split(",").map(e=>e.trim()).filter(Boolean)};y?await i.put(`/admin/facilities/${y._id}`,e):await i.post("/admin/facilities",e),w(),k()}catch(a){alert("Error saving facility: "+(a.response?.data?.message||a.message))}},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name *"}),e.jsx("input",{type:"text",value:N.name,onChange:e=>C({...N,name:e.target.value}),required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsxs("select",{value:N.category,onChange:e=>C({...N,category:e.target.value}),children:[e.jsx("option",{value:"Lab",children:"Lab"}),e.jsx("option",{value:"Equipment",children:"Equipment"}),e.jsx("option",{value:"Software",children:"Software"}),e.jsx("option",{value:"Workspace",children:"Workspace"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:N.status,onChange:e=>C({...N,status:e.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Short Description"}),e.jsx("textarea",{value:N.shortDescription,onChange:e=>C({...N,shortDescription:e.target.value}),rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Description *"}),e.jsx("textarea",{value:N.description,onChange:e=>C({...N,description:e.target.value}),rows:4,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Features (comma separated)"}),e.jsx("input",{type:"text",value:N.features,onChange:e=>C({...N,features:e.target.value}),placeholder:"3D Printers, CNC Machine, Soldering Stations"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Capacity"}),e.jsx("input",{type:"number",value:N.capacity,onChange:e=>C({...N,capacity:parseInt(e.target.value)||0})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Availability"}),e.jsx("input",{type:"text",value:N.availability,onChange:e=>C({...N,availability:e.target.value}),placeholder:"Mon-Fri 9AM-6PM"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,whiteSpace:"nowrap"},children:[e.jsx("input",{type:"checkbox",checked:N.bookingRequired,onChange:e=>C({...N,bookingRequired:e.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),"Booking Required"]})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hourly Rate (â‚¹)"}),e.jsx("input",{type:"number",value:N.hourlyRate,onChange:e=>C({...N,hourlyRate:parseInt(e.target.value)||0})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cover Image URL"}),e.jsx("input",{type:"url",value:N.coverImage,onChange:e=>C({...N,coverImage:e.target.value})})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,whiteSpace:"nowrap"},children:[e.jsx("input",{type:"checkbox",checked:N.featured,onChange:e=>C({...N,featured:e.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),"Featured Facility"]})}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:24},children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(d,{})," ",y?"Update":"Create"," Facility"]}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:k,children:"Cancel"})]})]})]})})]})};export{h as default};
//# sourceMappingURL=FacilityManager-B8LhSS-1.js.map
