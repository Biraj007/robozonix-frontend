import{j as e}from"./ui-B79sv0Rh.js";import{r as s}from"./vendor-BefrSIwx.js";import{n as a,a3 as t,_ as r,x as i,$ as l,a0 as o,G as c,a1 as n}from"./index-DpUjF_p5.js";import{B as d}from"./index-BSO6fPz6.js";/* empty css              */import"./drei-Bucn9VWY.js";import"./three-DVpoEhjm.js";const p=()=>{const[p,h]=s.useState([]),[m,u]=s.useState(!0),[x,j]=s.useState(null),[y,b]=s.useState(!1),[g,v]=s.useState(null),[k,N]=s.useState(""),[w,f]=s.useState({keywords:"",response:"",category:"general",isQuickReply:!1,quickReplyLabel:"",order:0,isActive:!0});s.useEffect(()=>{C()},[]);const C=async()=>{try{u(!0);const e=await a.get("/admin/chatbot");h(e.data),j(null)}catch(e){j(e.response?.data?.message||"Failed to fetch chatbot responses")}finally{u(!1)}},R=(e=null)=>{e?(v(e),f({keywords:e.keywords.join(", "),response:e.response,category:e.category||"general",isQuickReply:e.isQuickReply||!1,quickReplyLabel:e.quickReplyLabel||"",order:e.order||0,isActive:!1!==e.isActive})):(v(null),f({keywords:"",response:"",category:"general",isQuickReply:!1,quickReplyLabel:"",order:p.length+1,isActive:!0})),b(!0)},A=()=>{b(!1),v(null),f({keywords:"",response:"",category:"general",isQuickReply:!1,quickReplyLabel:"",order:0,isActive:!0})},L=p.filter(e=>e.keywords.some(e=>e.toLowerCase().includes(k.toLowerCase()))||e.response.toLowerCase().includes(k.toLowerCase()));return e.jsxs("div",{children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{className:"admin-title",children:"Chatbot Management"}),e.jsxs("div",{className:"admin-actions",children:[0===p.length&&e.jsxs("button",{className:"btn btn-outline",onClick:async()=>{if(window.confirm("This will seed default chatbot responses. Continue?"))try{await a.post("/admin/chatbot/seed"),C()}catch(e){j(e.response?.data?.message||"Failed to seed responses")}},children:[e.jsx(t,{})," Seed Defaults"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>R(),children:[e.jsx(r,{})," Add Response"]})]})]}),e.jsxs("div",{style:{marginBottom:24,position:"relative",maxWidth:400},children:[e.jsx(i,{style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search responses...",value:k,onChange:e=>N(e.target.value),style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-secondary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-md)",color:"var(--text-primary)"}})]}),x&&e.jsx("div",{className:"admin-error",children:x}),m?e.jsx("div",{className:"empty-state",children:"Loading..."}):0===L.length?e.jsxs("div",{className:"empty-state",children:[e.jsx(d,{size:48}),e.jsx("p",{children:"No chatbot responses found"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>R(),style:{marginTop:16},children:"Create First Response"})]}):e.jsx("div",{className:"chatbot-cards",children:L.map(s=>e.jsxs("div",{className:"chatbot-card",children:[e.jsxs("div",{className:"chatbot-card-header",children:[e.jsx("div",{className:"chatbot-card-order",children:s.order}),e.jsxs("div",{className:"chatbot-card-actions",children:[e.jsx("button",{className:"btn-icon",onClick:()=>R(s),title:"Edit",children:e.jsx(l,{})}),e.jsx("button",{className:"btn-icon danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this response?"))try{await a.delete(`/admin/chatbot/${e}`),C()}catch(s){j(s.response?.data?.message||"Failed to delete response")}})(s._id),title:"Delete",children:e.jsx(o,{})})]})]}),e.jsx("div",{className:"chatbot-card-keywords",children:s.keywords.map((s,a)=>e.jsx("span",{className:"keyword-tag",children:s},a))}),e.jsx("div",{className:"chatbot-card-response",children:s.response}),e.jsxs("div",{className:"chatbot-card-meta",children:[e.jsx("span",{className:`category-badge ${s.category}`,children:s.category}),s.isQuickReply&&e.jsx("span",{className:"quick-reply-badge",children:s.quickReplyLabel}),e.jsx("span",{className:"status-badge "+(s.isActive?"active":"inactive"),children:s.isActive?"Active":"Inactive"})]})]},s._id))}),y&&e.jsx("div",{className:"modal-overlay",onClick:A,children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:g?"Edit Response":"Add New Response"}),e.jsx("button",{className:"btn-icon",onClick:A,children:e.jsx(c,{})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...w,keywords:w.keywords.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e)};g?await a.put(`/admin/chatbot/${g._id}`,e):await a.post("/admin/chatbot",e),C(),A()}catch(s){j(s.response?.data?.message||"Failed to save response")}},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Keywords (comma-separated)"}),e.jsx("input",{type:"text",value:w.keywords,onChange:e=>f({...w,keywords:e.target.value}),placeholder:"hello, hi, hey, greetings",required:!0}),e.jsx("small",{children:"Enter keywords that trigger this response"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Response"}),e.jsx("textarea",{value:w.response,onChange:e=>f({...w,response:e.target.value}),placeholder:"Hello! ðŸ‘‹ Welcome to Robozonix Labs!",rows:5,required:!0}),e.jsx("small",{children:"Use \\n for line breaks, emojis work too!"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("select",{value:w.category,onChange:e=>f({...w,category:e.target.value}),children:["greeting","membership","courses","facilities","events","projects","contact","general"].map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Order"}),e.jsx("input",{type:"number",value:w.order,onChange:e=>f({...w,order:parseInt(e.target.value)}),min:"0"})]})]}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:w.isQuickReply,onChange:e=>f({...w,isQuickReply:e.target.checked})}),"Show as Quick Reply Button"]})}),w.isQuickReply&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quick Reply Button Label"}),e.jsx("input",{type:"text",value:w.quickReplyLabel,onChange:e=>f({...w,quickReplyLabel:e.target.value}),placeholder:"Membership Plans"})]}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:w.isActive,onChange:e=>f({...w,isActive:e.target.checked})}),"Active"]})}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn btn-outline",onClick:A,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(n,{})," ",g?"Update":"Create"]})]})]})]})})]})};export{p as default};
//# sourceMappingURL=ChatbotManager-C9vj0Wun.js.map
