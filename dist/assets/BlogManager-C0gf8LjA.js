import{j as e}from"./ui-B79sv0Rh.js";import{h as t,r as a}from"./vendor-BefrSIwx.js";import{n as s,_ as r,x as l,V as n,$ as i,a0 as o,G as c,a1 as d}from"./index-DpUjF_p5.js";import"./drei-Bucn9VWY.js";import"./three-DVpoEhjm.js";const h=()=>{const[h]=t(),[x,u]=a.useState([]),[m,g]=a.useState(!0),[p,j]=a.useState(!1),[v,b]=a.useState(null),[y,f]=a.useState(""),[N,w]=a.useState({title:"",content:"",excerpt:"",category:"Technology",tags:"",coverImage:"",status:"draft",featured:!1});a.useEffect(()=>{C(),"new"===h.get("action")&&j(!0)},[h]);const C=async()=>{try{const e=await s.get("/admin/blogs");u(e.data)}catch(e){}finally{g(!1)}},I=()=>{j(!1),b(null),w({title:"",content:"",excerpt:"",category:"Technology",tags:"",coverImage:"",status:"draft",featured:!1})},T=x.filter(e=>e.title.toLowerCase().includes(y.toLowerCase()));return e.jsxs("div",{children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{className:"admin-title",children:"Blog Management"}),e.jsx("div",{className:"admin-actions",children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>j(!0),children:[e.jsx(r,{})," Add Blog"]})})]}),e.jsxs("div",{style:{marginBottom:24,position:"relative",maxWidth:400},children:[e.jsx(l,{style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search blogs...",value:y,onChange:e=>f(e.target.value),style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-secondary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-md)",color:"var(--text-primary)"}})]}),m?e.jsx("div",{className:"empty-state",children:"Loading..."}):0===T.length?e.jsxs("div",{className:"empty-state",children:[e.jsx(n,{}),e.jsx("p",{children:"No blogs found"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>j(!0),style:{marginTop:16},children:"Create First Blog"})]}):e.jsx("div",{className:"content-table-wrapper",children:e.jsxs("table",{className:"content-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Views"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:T.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.coverImage&&e.jsx("img",{src:t.coverImage,alt:"",style:{width:48,height:32,objectFit:"cover",borderRadius:4}}),e.jsx("span",{children:t.title}),t.featured&&e.jsx("span",{className:"status-badge active",children:"Featured"})]})}),e.jsx("td",{children:t.category}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.status}`,children:t.status})}),e.jsx("td",{children:t.views||0}),e.jsx("td",{children:new Date(t.createdAt).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("div",{className:"table-actions",children:[e.jsx("button",{className:"action-btn",onClick:()=>(e=>{b(e),w({title:e.title,content:e.content,excerpt:e.excerpt||"",category:e.category,tags:e.tags?.join(", ")||"",coverImage:e.coverImage||"",status:e.status,featured:e.featured}),j(!0)})(t),children:e.jsx(i,{})}),e.jsx("button",{className:"action-btn delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this blog?"))try{await s.delete(`/admin/blogs/${e}`),C()}catch(t){}})(t._id),children:e.jsx(o,{})})]})})]},t._id))})]})}),p&&e.jsx("div",{className:"modal-overlay",onClick:I,children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title",children:v?"Edit Blog":"New Blog"}),e.jsx("button",{className:"modal-close",onClick:I,children:e.jsx(c,{})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...N,tags:N.tags.split(",").map(e=>e.trim()).filter(Boolean)};v?await s.put(`/admin/blogs/${v._id}`,e):await s.post("/admin/blogs",e),C(),I()}catch(t){alert("Error saving blog: "+(t.response?.data?.message||t.message))}},className:"admin-form",style:{padding:0,background:"transparent",border:"none"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title *"}),e.jsx("input",{type:"text",value:N.title,onChange:e=>w({...N,title:e.target.value}),required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsxs("select",{value:N.category,onChange:e=>w({...N,category:e.target.value}),children:[e.jsx("option",{value:"Technology",children:"Technology"}),e.jsx("option",{value:"Robotics",children:"Robotics"}),e.jsx("option",{value:"AI",children:"AI"}),e.jsx("option",{value:"IoT",children:"IoT"}),e.jsx("option",{value:"Tutorials",children:"Tutorials"}),e.jsx("option",{value:"News",children:"News"}),e.jsx("option",{value:"Events",children:"Events"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:N.status,onChange:e=>w({...N,status:e.target.value}),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cover Image URL"}),e.jsx("input",{type:"url",value:N.coverImage,onChange:e=>w({...N,coverImage:e.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Excerpt"}),e.jsx("textarea",{value:N.excerpt,onChange:e=>w({...N,excerpt:e.target.value}),rows:2,placeholder:"Brief description for previews..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Content *"}),e.jsx("textarea",{value:N.content,onChange:e=>w({...N,content:e.target.value}),rows:8,required:!0,placeholder:"Write your blog content here... (HTML supported)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tags (comma separated)"}),e.jsx("input",{type:"text",value:N.tags,onChange:e=>w({...N,tags:e.target.value}),placeholder:"robotics, arduino, tutorial"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,whiteSpace:"nowrap"},children:[e.jsx("input",{type:"checkbox",checked:N.featured,onChange:e=>w({...N,featured:e.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),"Featured Blog"]})}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:24},children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(d,{})," ",v?"Update":"Create"," Blog"]}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:I,children:"Cancel"})]})]})]})})]})};export{h as default};
//# sourceMappingURL=BlogManager-C0gf8LjA.js.map
