import{j as e}from"./ui-B79sv0Rh.js";import{h as t,r as a}from"./vendor-BefrSIwx.js";import{n as s,_ as i,x as n,v as l,$ as r,a0 as c,G as o,a1 as d}from"./index-DpUjF_p5.js";import"./drei-Bucn9VWY.js";import"./three-DVpoEhjm.js";const h=()=>{const[h]=t(),[p,m]=a.useState([]),[u,x]=a.useState(!0),[j,v]=a.useState(!1),[g,y]=a.useState(null),[b,f]=a.useState(""),[N,C]=a.useState({title:"",description:"",eventType:"Workshop",date:"",time:"",location:"",isOnline:!1,meetingLink:"",coverImage:"",capacity:0,price:0,status:"upcoming",featured:!1});a.useEffect(()=>{k(),"new"===h.get("action")&&v(!0)},[h]);const k=async()=>{try{const e=await s.get("/admin/events");m(e.data)}catch(e){}finally{x(!1)}},w=()=>{v(!1),y(null),C({title:"",description:"",eventType:"Workshop",date:"",time:"",location:"",isOnline:!1,meetingLink:"",coverImage:"",capacity:0,price:0,status:"upcoming",featured:!1})},T=p.filter(e=>e.title.toLowerCase().includes(b.toLowerCase()));return e.jsxs("div",{children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{className:"admin-title",children:"Event Management"}),e.jsx("div",{className:"admin-actions",children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>v(!0),children:[e.jsx(i,{})," Add Event"]})})]}),e.jsxs("div",{style:{marginBottom:24,position:"relative",maxWidth:400},children:[e.jsx(n,{style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search events...",value:b,onChange:e=>f(e.target.value),style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-secondary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-md)",color:"var(--text-primary)"}})]}),u?e.jsx("div",{className:"empty-state",children:"Loading..."}):0===T.length?e.jsxs("div",{className:"empty-state",children:[e.jsx(l,{}),e.jsx("p",{children:"No events found"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>v(!0),style:{marginTop:16},children:"Create First Event"})]}):e.jsx("div",{className:"content-table-wrapper",children:e.jsxs("table",{className:"content-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:T.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.eventType}),e.jsx("td",{children:new Date(t.date).toLocaleDateString()}),e.jsx("td",{children:t.isOnline?"Online":t.location}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.status}`,children:t.status})}),e.jsx("td",{children:e.jsxs("div",{className:"table-actions",children:[e.jsx("button",{className:"action-btn",onClick:()=>(e=>{y(e),C({title:e.title,description:e.description,eventType:e.eventType,date:e.date?.split("T")[0]||"",time:e.time,location:e.location,isOnline:e.isOnline,meetingLink:e.meetingLink||"",coverImage:e.coverImage||"",capacity:e.capacity||0,price:e.price||0,status:e.status,featured:e.featured}),v(!0)})(t),children:e.jsx(r,{})}),e.jsx("button",{className:"action-btn delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this event?"))try{await s.delete(`/admin/events/${e}`),k()}catch(t){}})(t._id),children:e.jsx(c,{})})]})})]},t._id))})]})}),j&&e.jsx("div",{className:"modal-overlay",onClick:w,children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title",children:g?"Edit Event":"New Event"}),e.jsx("button",{className:"modal-close",onClick:w,children:e.jsx(o,{})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{g?await s.put(`/admin/events/${g._id}`,N):await s.post("/admin/events",N),k(),w()}catch(t){alert("Error saving event: "+(t.response?.data?.message||t.message))}},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title *"}),e.jsx("input",{type:"text",value:N.title,onChange:e=>C({...N,title:e.target.value}),required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Event Type"}),e.jsxs("select",{value:N.eventType,onChange:e=>C({...N,eventType:e.target.value}),children:[e.jsx("option",{value:"Workshop",children:"Workshop"}),e.jsx("option",{value:"Seminar",children:"Seminar"}),e.jsx("option",{value:"Competition",children:"Competition"}),e.jsx("option",{value:"Training",children:"Training"}),e.jsx("option",{value:"Hackathon",children:"Hackathon"}),e.jsx("option",{value:"Webinar",children:"Webinar"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:N.status,onChange:e=>C({...N,status:e.target.value}),children:[e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date *"}),e.jsx("input",{type:"date",value:N.date,onChange:e=>C({...N,date:e.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Time *"}),e.jsx("input",{type:"text",value:N.time,onChange:e=>C({...N,time:e.target.value}),placeholder:"10:00 AM - 4:00 PM",required:!0})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{type:"checkbox",checked:N.isOnline,onChange:e=>C({...N,isOnline:e.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),"Online Event"]})}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[N.isOnline?"Meeting Link":"Location"," *"]}),e.jsx("input",{type:"text",value:N.isOnline?N.meetingLink:N.location,onChange:e=>C({...N,[N.isOnline?"meetingLink":"location"]:e.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description *"}),e.jsx("textarea",{value:N.description,onChange:e=>C({...N,description:e.target.value}),rows:4,required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Capacity (0 = unlimited)"}),e.jsx("input",{type:"number",value:N.capacity,onChange:e=>C({...N,capacity:parseInt(e.target.value)||0})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price (0 = free)"}),e.jsx("input",{type:"number",value:N.price,onChange:e=>C({...N,price:parseInt(e.target.value)||0})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cover Image URL"}),e.jsx("input",{type:"url",value:N.coverImage,onChange:e=>C({...N,coverImage:e.target.value})})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,whiteSpace:"nowrap"},children:[e.jsx("input",{type:"checkbox",checked:N.featured,onChange:e=>C({...N,featured:e.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),"Featured Event"]})}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:24},children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(d,{})," ",g?"Update":"Create"," Event"]}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:w,children:"Cancel"})]})]})]})})]})};export{h as default};
//# sourceMappingURL=EventManager-5_weXKpx.js.map
