{"version":3,"file":"AdminLayout-B2mtBQCi.js","sources":["../../src/pages/Admin/AdminLayout.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Link, useLocation, useNavigate, Outlet } from 'react-router-dom';\r\nimport { \r\n  FiHome, FiFileText, FiCalendar, FiBook, FiBox, \r\n  FiLogOut, FiGrid, FiUsers, FiTool, FiMessageCircle,\r\n  FiMenu, FiX\r\n} from 'react-icons/fi';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport './Admin.css';\r\n\r\nconst AdminLayout = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { user, logout } = useAuth();\r\n  \r\n  // Check if user has access to admin panel\r\n  const hasAdminAccess = user && (user.role === 'admin' || user.role === 'editor');\r\n  \r\n  // Check if user has permission for a specific section\r\n  const hasPermission = (permission) => {\r\n    // Admin has all permissions\r\n    if (user?.role === 'admin') return true;\r\n    // Editor needs specific permission\r\n    if (user?.role === 'editor') {\r\n      return user.permissions?.includes(permission);\r\n    }\r\n    return false;\r\n  };\r\n  \r\n  // Redirect if no admin access\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate('/login');\r\n    } else if (!hasAdminAccess) {\r\n      navigate('/dashboard');\r\n    }\r\n  }, [user, navigate, hasAdminAccess]);\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    navigate('/');\r\n  };\r\n\r\n  // All possible nav items with their required permissions\r\n  const allNavItems = [\r\n    { path: '/admin', icon: FiHome, label: 'Dashboard', exact: true, permission: null }, // Dashboard always visible\r\n    { path: '/admin/blogs', icon: FiFileText, label: 'Blogs', permission: 'blogs' },\r\n    { path: '/admin/events', icon: FiCalendar, label: 'Events', permission: 'events' },\r\n    { path: '/admin/courses', icon: FiBook, label: 'Courses', permission: 'courses' },\r\n    { path: '/admin/projects', icon: FiBox, label: 'Projects', permission: 'projects' },\r\n    { path: '/admin/facilities', icon: FiTool, label: 'Facilities', permission: 'facilities' },\r\n    { path: '/admin/users', icon: FiUsers, label: 'Users', permission: 'users' },\r\n    { path: '/admin/chatbot', icon: FiMessageCircle, label: 'Chatbot', permission: 'chatbot' },\r\n  ];\r\n\r\n  // Filter nav items based on permissions\r\n  const navItems = allNavItems.filter(item => \r\n    item.permission === null || hasPermission(item.permission)\r\n  );\r\n\r\n  const isActive = (path, exact = false) => {\r\n    if (exact) return location.pathname === path;\r\n    return location.pathname.startsWith(path);\r\n  };\r\n\r\n  /* Mobile Sidebar Toggle */\r\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\r\n  const toggleSidebar = () => setSidebarOpen(!isSidebarOpen);\r\n  const closeSidebar = () => setSidebarOpen(false);\r\n\r\n  // Close sidebar when navigating on mobile\r\n  useEffect(() => {\r\n    closeSidebar();\r\n  }, [location.pathname]);\r\n\r\n  if (!user || !hasAdminAccess) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin-layout\">\r\n      {/* Mobile Header */}\r\n      <div className=\"mobile-admin-header\">\r\n        <button className=\"mobile-toggle-btn\" onClick={toggleSidebar}>\r\n          {isSidebarOpen ? <FiX /> : <FiMenu />}\r\n        </button>\r\n        <div className=\"mobile-brand\">\r\n          <FiGrid size={20} />\r\n          <span>ROBOZONIX</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Sidebar Overlay */}\r\n      {isSidebarOpen && <div className=\"sidebar-overlay\" onClick={closeSidebar}></div>}\r\n\r\n      {/* Sidebar */}\r\n      <aside className={`admin-sidebar ${isSidebarOpen ? 'open' : ''}`}>\r\n        <div className=\"sidebar-header\">\r\n          <Link to=\"/\" className=\"admin-logo\">\r\n            <FiGrid size={24} />\r\n            <h2>ROBOZONIX ADMIN</h2>\r\n          </Link>\r\n          <button className=\"close-sidebar-btn\" onClick={closeSidebar}>\r\n            <FiX />\r\n          </button>\r\n        </div>\r\n\r\n        <nav className=\"admin-nav\">\r\n          <div className=\"nav-section\">\r\n            <span className=\"nav-section-title\">Management</span>\r\n            {navItems.map((item) => (\r\n              <Link\r\n                key={item.path}\r\n                to={item.path}\r\n                className={`admin-nav-link ${isActive(item.path, item.exact) ? 'active' : ''}`}\r\n                onClick={closeSidebar}\r\n              >\r\n                <item.icon />\r\n                <span>{item.label}</span>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"nav-section\">\r\n            <span className=\"nav-section-title\">Account</span>\r\n            <button onClick={handleLogout} className=\"admin-nav-link\" style={{ width: '100%', textAlign: 'left', border: 'none', background: 'none', cursor: 'pointer' }}>\r\n              <FiLogOut />\r\n              <span>Logout</span>\r\n            </button>\r\n          </div>\r\n        </nav>\r\n\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"admin-main\">\r\n        <Outlet context={{ hasPermission }} />\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminLayout;\r\n"],"names":["AdminLayout","location","useLocation","navigate","useNavigate","user","logout","useAuth","hasAdminAccess","role","hasPermission","permission","permissions","includes","useEffect","navItems","path","icon","FiHome","label","exact","FiFileText","FiCalendar","FiBook","FiBox","FiTool","FiUsers","FiMessageCircle","filter","item","isActive","pathname","startsWith","isSidebarOpen","setSidebarOpen","useState","closeSidebar","jsxs","className","children","jsx","onClick","FiX","FiMenu","FiGrid","size","Link","to","map","style","width","textAlign","border","background","cursor","FiLogOut","Outlet","context"],"mappings":"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"}